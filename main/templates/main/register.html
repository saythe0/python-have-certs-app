{% extends 'main/base.html' %}

{% block content %}
<div class="container">
	<h2>üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>

	<form method="post" id="registerForm" novalidate>
		{% csrf_token %}

		{% if form.non_field_errors %}
		<ul class="non-field-errors">
			{% for error in form.non_field_errors %}
			<li>{{ error }}</li>
			{% endfor %}
		</ul>
		{% endif %}

		<div class="form-group">
			<label for="{{ form.username.id_for_label }}">{{ form.username.label }}</label>
			{{ form.username }}
			{% if form.username.errors %}
			{% for error in form.username.errors %}
			<span class="error-message">{{ error }}</span>
			{% endfor %}
			{% endif %}
		</div>

		<div class="form-group">
			<label for="{{ form.password1.id_for_label }}">{{ form.password1.label }}</label>
			{{ form.password1 }}
			{% if form.password1.errors %}
			{% for error in form.password1.errors %}
			<span class="error-message">{{ error }}</span>
			{% endfor %}
			{% endif %}
		</div>

		<div class="form-group">
			<label for="{{ form.password2.id_for_label }}">{{ form.password2.label }}</label>
			{{ form.password2 }}
			{% if form.password2.errors %}
			{% for error in form.password2.errors %}
			<span class="error-message">{{ error }}</span>
			{% endfor %}
			{% endif %}
		</div>

		<div class="form-group">
			<label for="{{ form.fio.id_for_label }}">{{ form.fio.label }}</label>
			{{ form.fio }}
			{% if form.fio.errors %}
			{% for error in form.fio.errors %}
			<span class="error-message">{{ error }}</span>
			{% endfor %}
			{% endif %}
		</div>

		<div class="form-group">
			<label for="{{ form.phone.id_for_label }}">{{ form.phone.label }}</label>
			{{ form.phone }}
			{% if form.phone.errors %}
			{% for error in form.phone.errors %}
			<span class="error-message">{{ error }}</span>
			{% endfor %}
			{% endif %}
		</div>

		<div class="form-group">
			<label for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
			{{ form.email }}
			{% if form.email.errors %}
			{% for error in form.email.errors %}
			<span class="error-message">{{ error }}</span>
			{% endfor %}
			{% endif %}
		</div>

		<button type="submit" class="btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>

		<div class="form-footer">
			<p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="{% url 'login' %}">–í–æ–π—Ç–∏</a></p>
		</div>
	</form>
</div>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ error –∫ –ø–æ–ª—è–º —Å –æ—à–∏–±–∫–∞–º–∏
		const errorMessages = document.querySelectorAll('.error-message')
		errorMessages.forEach(function (errorMsg) {
			const input = errorMsg.previousElementSibling
			if (input && input.classList.contains('form-control')) {
				input.classList.add('error')
			}
		})

		// –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ error –ø—Ä–∏ –≤–≤–æ–¥–µ
		const inputs = document.querySelectorAll('.form-control')
		inputs.forEach(function (input) {
			input.addEventListener('input', function () {
				this.classList.remove('error')
				const errorMsg = this.nextElementSibling
				if (errorMsg && errorMsg.classList.contains('error-message')) {
					errorMsg.style.display = 'none'
				}
			})
		})
	});
</script>
{% endblock %}